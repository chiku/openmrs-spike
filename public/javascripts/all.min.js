var Application={Models:{},Collections:{},collections:{},Routers:{},Views:{},Configuration:{Urls:{},Selectors:{}},initialize:function(){new Application.Routers.Patients,Backbone.history.start(),Application.collections.patients.fetch()}};Application.Configuration.Selectors={main:'body div[role="main"]',appointments:"#appointments",patients:"#patients-container",patientDetails:"#patient-details-container",templates:{patients:"#template-patients",patient:"#template-patient",patientDetails:"#template-patient-details"}},Application.Configuration.Urls={patients:"/patients.json"},Application.Models.Patient=Backbone.Model.extend({}),Application.Collections.Patients=Backbone.Collection.extend({model:Application.Models.Patient,url:Application.Configuration.Urls.patients,parse:function(t){return t.patients},comparator:"name"}),Application.collections.patients=new Application.Collections.Patients,Application.Routers.Patients=Backbone.Router.extend({routes:{"":"index",patients:"index","patients/:id":"show"},initialize:function(){this.patientsView=new Application.Views.Patients.Index({collection:Application.collections.patients})},index:function(){this.patientsView.attachContentToCleanContainer()},show:function(){}}),Application.Views.Patients||(Application.Views.Patients={}),Application.Views.Patients.Index=Backbone.View.extend({tagName:"section",className:"patients",template:function(){return _.template(jQuery(this.selectors.templates.patients).html())},initialize:function(){this.collection.bind("reset",this.render,this),this.selectors=Application.Configuration.Selectors},render:function(){return jQuery(this.el).html(this.template({})),this.collection.each(function(t){var e=new Application.Views.Patients.Info({model:t});jQuery(this.selectors.patients).append(e.render().el)},this),this},attachContentToCleanContainer:function(){return jQuery(this.selectors.appointments).empty().append(this.render().el),this}}),Application.Views.Patients||(Application.Views.Patients={}),Application.Views.Patients.Info=Backbone.View.extend({tagName:"li",className:"patient",events:{click:"showDetails"},template:function(){return _.template(jQuery(Application.Configuration.Selectors.templates.patient).html())},initialize:function(){this.model.bind("change",this.render,this),this.detailedView=new Application.Views.Patients.Show({model:this.model})},render:function(){var t=this.template()(this.model.toJSON());return jQuery(this.el).html(t),this},showDetails:function(){this.detailedView.attachContentToCleanContainer()}}),Application.Views.Patients||(Application.Views.Patients={}),Application.Views.Patients.Show=Backbone.View.extend({tagName:"ul",className:"patient-details",template:function(){return _.template(jQuery(this.selectors.templates.patientDetails).html())},initialize:function(){this.model.bind("change",this.attachContentToCleanContainer,this),this.selectors=Application.Configuration.Selectors},render:function(){var t=this.template()(this.model.toJSON());return jQuery(this.el).html(t),this},attachContentToCleanContainer:function(){return jQuery(this.selectors.patientDetails).empty().append(this.render().el),this}}),jQuery(function(){var t=Application.Configuration.Selectors,e=jQuery(t.main);jQuery("<section>",{id:t.appointments.replace("#","")}).appendTo(e),jQuery("<section>",{id:t.patientDetails.replace("#","")}).appendTo(e),Application.initialize()});